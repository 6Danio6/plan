<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Timetables</title>
    <link rel="stylesheet" href="./src/styles/style.css">
</head>
<body>
    <ul id="list"></ul>
    <table id="table">
        <tr>     <th id="header" colspan="6"></th>         </tr>
        <tr class="lessons"> <td>Nr</td><td>Poniedziałek</td><td>Wtorek</td><td>Środa</td><td>Czwartek</td><td>Piątek</td> </tr>
        <tr class="lessons"> <td>0 <br> 7:10 - 7:55</td><td></td><td></td><td></td><td></td><td></td> </tr>
        <tr class="lessons"> <td>1 <br> 8:00 - 8:45</td><td></td><td></td><td></td><td></td><td></td> </tr>
        <tr class="lessons"> <td>2 <br> 8:50 - 9:35</td><td></td><td></td><td></td><td></td><td></td> </tr>
        <tr class="lessons"> <td>3 <br> 9:50 - 10:35</td><td></td><td></td><td></td><td></td><td></td> </tr>
        <tr class="lessons"> <td>4 <br> 10:40 - 11:25</td><td></td><td></td><td></td><td></td><td></td> </tr>
        <tr class="lessons"> <td>5 <br> 11:30 - 12:15</td><td></td><td></td><td></td><td></td><td></td> </tr>
        <tr class="lessons"> <td>6 <br> 12:30 - 13:15</td><td></td><td></td><td></td><td></td><td></td> </tr>
        <tr class="lessons"> <td>7 <br> 13:20 - 14:05</td><td></td><td></td><td></td><td></td><td></td> </tr>
        <tr class="lessons"> <td>8 <br> 14:10 - 14:55</td><td></td><td></td><td></td><td></td><td></td> </tr>
        <tr class="lessons"> <td>9 <br> 15:00 - 15:45</td><td></td><td></td><td></td><td></td><td></td> </tr>
        <tr class="lessons"> <td>10 <br> 15:50 - 16:35</td><td></td><td></td><td></td><td></td><td></td> </tr>
        <tr class="lessons"> <td>12 <br> 0:00 - 0:00</td><td></td><td></td><td></td><td></td><td></td> </tr>
    </table>
    
    <script>
        fetch('https://raw.githubusercontent.com/6Danio6/6Danio6.github.io/main/timetables.json')
            .then((response) => response.json())
            .then((timetables) => {
                console.log(timetables)
                const teachers = Object.keys(timetables);
                let trs = document.querySelectorAll("tr.lessons")
                teachers.sort();

                for (let teacher of teachers) {
                    let li = document.createElement("li");
                    li.innerHTML = teacher;
                    li.id = teacher;
                    li.onclick = ((teacher) => { return () =>{ fillTable(teacher); }})(teacher);
                    list.appendChild(li);
                }

                function fillTable(teacher){
                    for (let li of list.children) {
                        li.style.removeProperty("background-color");
                    }
                    document.getElementById(teacher).style["background-color"] = "#17f9ff";
                    console.log(trs)
                    for (let day in timetables[teacher]){ // 0-4
                        for (let lesson in timetables[teacher][day]){ // 0-11
                            console.log(day)
                            trs[Number(lesson)+1].children[Number(day) + 1].innerHTML = (timetables[teacher][day][lesson][0] ? timetables[teacher][day][lesson][0] : "") 
                            + "<br>" 
                            + (timetables[teacher][day][lesson][1] != 0 ? timetables[teacher][day][lesson][1] : "");
                        }
                    }
                    header.innerHTML = teacher;
                }
            }
        );
    </script>
</body>
</html>